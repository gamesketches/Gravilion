<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Gravilion</title>
    <script type="text/javascript" src="phaser.min.js"></script>
</head>
<body>

  <script type="text/javascript">
  var game = new Phaser.Game(800, 400, Phaser.AUTO, '', {preload: preload,
                                              create: create, update: update});

  var boundaries;
  var player1, player2;
  var player1Life = 100, player2Life = 100, player1Air = 100, player2Aire = 100;
  function preload() {
    console.log("more like proload mirite");
  }

  function create() {

    game.physics.startSystem(Phaser.Physics.ARCADE);

    boundaries = game.add.group();
    boundaries.enableBody = true;

    var vertBoundaries = game.make.bitmapData(800, 10);
    vertBoundaries.ctx.fillStyle = "#ff0000";
    vertBoundaries.ctx.fillRect(0, 0, 800, 10);

    var top = boundaries.create(0, 0, vertBoundaries, 0)
    top.body.immovable = true;
    var bottom = boundaries.create(0, 390, vertBoundaries, 0);
    bottom.body.immovable = true;

    var horBoundaries = game.make.bitmapData(10, 380);
    horBoundaries.ctx.fillStyle = "#ff0000";
    horBoundaries.ctx.fillRect(0, 0, 10, 390);

    var left = boundaries.create(0, 10, horBoundaries, 0);
    left.body.immovable = true;
    var right = boundaries.create(790, 10, horBoundaries, 0);
    right.body.immovable = true;

    var playerRect = game.make.bitmapData(35, 150);
    playerRect.ctx.fillStyle = "#00FF00";
    playerRect.ctx.fillRect(0, 0, 35, 150);

    player1 = game.add.sprite(40, 240, playerRect);
    game.physics.arcade.enable(player1);
    player1.body.bounce.y = 0.2;
    player1.body.gravity.y = 300;

    player2 = game.add.sprite(600, 10, playerRect);
    game.physics.arcade.enable(player2);
    player2.body.bounce.y = 0.2;
    player2.body.gravity.y = -300;
  }

  function update() {
    game.physics.arcade.collide(player1, boundaries);
    game.physics.arcade.collide(player2, boundaries);

    var p2Controls = game.input.keyboard.createCursorKeys();

    var p1Controls = {
      up: game.input.keyboard.addKey(Phaser.Keyboard.W),
      down: game.input.keyboard.addKey(Phaser.Keyboard.S),
      left: game.input.keyboard.addKey(Phaser.Keyboard.A),
      right: game.input.keyboard.addKey(Phaser.Keyboard.D),
    }

    player1.body.velocity.x = 0;
    player2.body.velocity.x = 0;
    if(p1Controls.left.isDown) {
      player1.body.velocity.x = -100;
    }
    else if(p1Controls.right.isDown) {
      player1.body.velocity.x = 100;
    }
    if(p2Controls.left.isDown) {
      player2.body.velocity.x = -100;
    }
    else if(p2Controls.right.isDown) {
      player2.body.velocity.x = 100;
    }
  }

  </script>
</body>
</html>
